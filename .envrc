# direnv file to auto-use project Node version via nvm
# Users must run `direnv allow` once to enable this file for the project.

# load nvm if available (supports nvm installed via shell profile)
if [ -n "${NVM_DIR-}" ]; then
  # nvm already available
  true
else
  # try to source common install locations
  if [ -s "$HOME/.nvm/nvm.sh" ]; then
    source "$HOME/.nvm/nvm.sh"
  elif [ -s "/usr/local/opt/nvm/nvm.sh" ]; then
    source "/usr/local/opt/nvm/nvm.sh"
  fi
fi

# use nvm to switch to the project version (install if missing)
if command -v nvm >/dev/null 2>&1; then
  nvm install 22.19.0 >/dev/null 2>&1 || true
  nvm use 22.19.0 >/dev/null 2>&1 || true
fi

# Fallback: ensure the specific node version's bin directory is first in PATH
export PATH="$HOME/.nvm/versions/node/v22.19.0/bin:$PATH"
