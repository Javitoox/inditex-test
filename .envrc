# Archivo direnv para usar automáticamente la versión de Node del proyecto mediante nvm
# Los usuarios deben ejecutar `direnv allow` una vez para habilitar este archivo en el proyecto.

# cargar nvm si está disponible (compatible con nvm instalado mediante el perfil de shell)
if [ -n "${NVM_DIR-}" ]; then
  # nvm ya está disponible
  true
else
  # intentar cargar desde ubicaciones de instalación comunes
  if [ -s "$HOME/.nvm/nvm.sh" ]; then
    source "$HOME/.nvm/nvm.sh"
  elif [ -s "/usr/local/opt/nvm/nvm.sh" ]; then
    source "/usr/local/opt/nvm/nvm.sh"
  fi
fi

# usar nvm para cambiar a la versión del proyecto (instalar si falta)
if command -v nvm >/dev/null 2>&1; then
  nvm install 22.19.0 >/dev/null 2>&1 || true
  nvm use 22.19.0 >/dev/null 2>&1 || true
fi

# Alternativa: asegurar que el directorio bin de la versión específica de node esté primero en PATH
export PATH="$HOME/.nvm/versions/node/v22.19.0/bin:$PATH"
